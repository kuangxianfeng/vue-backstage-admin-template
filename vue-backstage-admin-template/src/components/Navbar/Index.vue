<template>
    <div class="navbar">
        <div class="handle-box-1 hDiv">
            <div class="sidebar-handle hDiv">
                <i class="el-icon-s-fold sidebar-handle-icon" v-if="!sidebarIsCollapse" @click="sidebarHandle" title="收起菜单"></i>
                <i class="el-icon-s-unfold sidebar-handle-icon" v-else @click="sidebarHandle" title="展开菜单"></i>
            </div>
            <el-breadcrumb separator-class="el-icon-arrow-right">
                <el-breadcrumb-item v-for="(item,idx) in breadcrumbRecordArr" :key="idx">{{item.meta.title}}</el-breadcrumb-item>
            </el-breadcrumb>
            <div class="handle-route-box hDiv">
                <el-tooltip class="item" effect="dark" content="进入全屏" placement="bottom-end">
                    <svg t="1592831223660" @click="fullScreenHandle('yes')" class="icon handlePageIcon" v-if="!isEnlarge" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1639" width="24" height="24"><path d="M210.295467 89.617067l154.385066 154.385066-120.661333 120.6784-154.402133-154.385066L0 299.9296V0h299.9296l-89.634133 89.617067z m724.087466 120.6784l-162.9184 162.9184-120.6784-120.661334 162.9184-162.935466L724.0704 0H1024v299.9296l-89.617067-89.634133zM813.704533 934.4L642.2528 762.9312l120.661333-120.6784L934.4 813.704533 1024 724.0704V1024H724.0704l89.634133-89.617067zM89.6 813.704533l162.9184-162.9184 120.6784 120.661334-162.9184 162.935466L299.9296 1024H0V724.0704l89.617067 89.634133z" p-id="1640" fill="#606266"></path></svg>                
                </el-tooltip>
                <el-tooltip class="item" effect="dark" content="退出全屏" placement="bottom-end">
                    <svg t="1592831298919" @click="fullScreenHandle('no')" class="icon handlePageIcon" v-if="isEnlarge" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2563" width="24" height="24"><path d="M407.806963 366.396831l-0.165776-269.456988c-0.011256-19.010983-15.344476-34.43016-34.225499-34.418904-18.881023 0.01228-34.1948 15.4509-34.183544 34.46086l0.119727 194.447621L121.745808 72.528873c-12.799514-12.873192-33.528628-12.859889-46.38033 0.028653-12.785188 12.95608-12.772908 33.827433 0.028653 46.699602L293.068755 338.091158l-193.118346 0.12075c-18.879999 0.01228-34.1948 15.4509-34.183544 34.46086 0.011256 19.009959 15.3455 34.43016 34.225499 34.418904l267.615037-0.166799C392.577097 406.9085 407.824359 393.94935 407.806963 366.396831L407.806963 366.396831z" p-id="2564" fill="#606266"></path><path d="M655.570883 407.217539l267.615037-0.432859c18.881023-0.030699 34.17945-15.484669 34.149774-34.495652-0.030699-19.010983-15.379269-34.414811-34.259268-34.385135l-193.118346 0.312108L947.148681 118.895901c12.772908-12.900821 12.739139-33.772174-0.074701-46.699602-12.880355-12.860912-33.608445-12.827143-46.38033 0.074701L683.57161 291.660686l-0.310062-194.447621c-0.030699-19.009959-15.379269-34.414811-34.259268-34.384112-18.881023 0.030699-34.17945 15.484669-34.149774 34.495652l0.429789 269.456988C615.32732 394.332067 630.53365 407.257447 655.570883 407.217539L655.570883 407.217539z" p-id="2565" fill="#606266"></path><path d="M367.764991 613.848643l-267.615037-0.415462c-18.879999-0.029676-34.227546 15.376199-34.257222 34.387181-0.028653 19.010983 15.270798 34.463929 34.151821 34.492582l193.118346 0.299829L75.28873 901.243165c-12.812817 12.859889-12.844539 33.731242-0.071631 46.699602 12.840446 12.900821 33.568537 12.933567 46.38033 0.071631L339.40406 729.315444l-0.297782 194.447621c-0.028653 19.010983 15.270798 34.463929 34.151821 34.492582 18.881023 0.029676 34.227546-15.376199 34.257222-34.387181l0.412392-269.456988C407.969669 626.859981 392.734686 613.887528 367.764991 613.848643L367.764991 613.848643z" p-id="2566" fill="#606266"></path><path d="M614.842273 654.450363l0.472767 269.456988c0.033769 19.010983 15.384385 34.412764 34.264385 34.378995 18.881023-0.033769 34.177404-15.489786 34.143635-34.500768l-0.340761-194.447621 217.85575 218.650859c12.814864 12.858866 33.542954 12.822027 46.38033-0.082888 12.770861-12.971429 12.734022-33.842783-0.081864-46.699602l-217.923288-218.582297 193.118346-0.343831c18.879999-0.033769 34.177404-15.489786 34.143635-34.500768-0.033769-19.010983-15.384385-34.412764-34.264385-34.378995l-267.615037 0.475837C629.956505 613.922321 614.793154 626.898867 614.842273 654.450363L614.842273 654.450363z" p-id="2567" fill="#606266"></path></svg>
                </el-tooltip>
                <el-tooltip class="item" effect="dark" content="主题配置" placement="bottom-end">
                    <svg t="1592831900870" @click="paletteHandle" class="icon paletteIcon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3377" width="24" height="24"><path d="M222.3 76.4c-1.4-2.9-3.3-6-5.6-9.3-0.6-0.9-1.1-1.8-1.8-2.6-7.4-10.4-19.8-24.3-29.4-30.8C131.5-7.7 68.1-0.1 34.6 5.2c-11.8 1.9-23 3.8-23.5 6.4-0.4 2.3 14.5 6.7 19.8 9.6C70.1 42.7 82.1 74.9 88.5 97c0.7 5.3 2 10.7 3.7 16.1 0.1 0.7 0.1 1 0.1 1h0.2c3.1 9.6 7.9 19.1 14.3 28 27.3 37.9 73.6 51.3 103.4 29.8 26.8-19.2 31.2-59.9 12.1-95.5z" p-id="3378" fill="#606266"></path><path d="M354 651.3c-50.7-16-82.2-59.5-70.3-97.1 6.5-20.6 25-34.9 48.4-41.2-13.2-20.1-26.7-40.4-38.8-59.8l-2.7-4.3c-42.8-65.7-79.9-125.7-110.9-178.6 1.5 3.3 3.1 6.8 4.9 10.8 0.6 1.3 1.1 2.4 1.7 3.8 5.8 13.1 12.6 29.3 19.6 47.5 0.7 1.8 1.4 3.8 2.1 5.7 2.7 7.3 5.4 14.9 8.1 22.7 0.9 2.5 1.7 5.1 2.6 7.6 2.7 8.1 5.3 16.5 7.7 25l1.8 6c3 10.7 5.8 21.6 8.2 32.6 11.9 54.2 14.6 109-7.1 146l-9.4 16.2c-13.7 14.8-12.9 43.9 1.5 64.7 0 0 39 55.7 83 97.4C406.2 852.4 528 908 642.2 920c-94.1-103.4-189.9-233.6-215.3-268.8-20.8 7.6-46.8 8.3-72.9 0.1z" p-id="3379" fill="#606266"></path><path d="M1011.9 573.7c-0.2-3.4-0.8-6.8-1.1-10.1-0.9-9.9-2-19.8-3.6-29.8-0.8-5-2-10-2.9-15-1.7-8.5-3.3-16.9-5.5-25.4-1.4-5.5-3.1-11-4.7-16.6-2.3-8-4.7-16-7.4-24-2-5.7-4.1-11.5-6.3-17.2-3-7.8-6-15.5-9.4-23.3-2.5-5.8-5.1-11.6-7.9-17.3-3.6-7.7-7.5-15.3-11.5-22.9-3-5.7-6.1-11.4-9.3-17-4.3-7.6-9-15.2-13.7-22.7-3.4-5.5-6.9-11-10.5-16.4-5.2-7.7-10.8-15.3-16.4-22.9-3.7-5-7.3-10.1-11.2-15-6.5-8.3-13.5-16.4-20.5-24.5-3.5-4.1-6.8-8.2-10.5-12.2-10.9-12-22.3-23.7-34.3-35.1C648.8 38.9 412.5-5.1 259.9 88.6c2.7 9.7 4.5 19.4 4.8 29 6.5 7.1 13 14.3 19.7 21.7 5-6.2 11-11 11-11 3.2-2.4 9.2-2.1 13.5 0.7l4.2 2c25.9 12.4 64-6.3 64-6.3 3.8-1.8 11.5-1.1 17.2 1.5 0 0 3.1 1.5 9.5 5.8 44 29.3 60.8 81.5 37.5 116.6-9.4 14.2-24 23.1-40.9 27.2 15.6 19.1 31.4 38.8 47.7 59.4l3.5 4.3c46 56 93.3 117.8 140.7 183.5 34.4 47.9 83.6 118.6 130.2 192.8 1.7-6.4 4.1-12.5 7.8-18.2 5.1-7.7 13.6-14.2 13.6-14.2 3.2-2.5 9.3-2.2 13.5 0.6l4.2 2c25.8 12.4 64-6.3 64-6.3 3.8-1.8 11.5-1.1 17.2 1.6 0 0 3.1 1.4 9.5 5.7 44 29.3 60.8 81.5 37.4 116.6-20.1 30.3-63.6 37.8-103.4 20.5 13.8 25.4 26.3 50.1 36.7 73.3 40-15.9 76.3-39.2 106.4-70.9 13.9-14.6 25.4-30.8 35.8-47.6l0.3 0.6c1.7-2.7 3-5.6 4.5-8.4 2.7-4.7 5.3-9.5 7.8-14.4 3.1-6.1 5.9-12.3 8.5-18.7 2.1-5 4.2-9.9 6-15 2.4-6.6 4.4-13.4 6.4-20.3 1.4-5 3-10 4.2-15.1 1.8-7.4 3.1-14.9 4.3-22.5 0.8-4.8 1.8-9.5 2.4-14.4 1.1-8.9 1.7-18 2.2-27 0.2-3.7 0.7-7.4 0.8-11.2 0.5-12.7 0.2-25.7-0.7-38.8zM685.2 228.9c-23.4 35.1-78 39.8-122 10.5-44-29.4-60.8-81.6-37.5-116.6 5.1-7.7 13.6-14.2 13.6-14.2 3.1-2.5 9.2-2.2 13.5 0.6l4.2 2c25.9 12.4 64-6.3 64-6.3 3.8-1.8 11.5-1.1 17.2 1.5 0 0 3.1 1.5 9.5 5.8 44.1 29.4 60.9 81.6 37.5 116.7z m68 162.9c-44-29.3-60.9-81.5-37.5-116.6 5.1-7.7 13.6-14.2 13.6-14.2 3.2-2.4 9.3-2.1 13.5 0.6l4.2 2c25.8 12.4 64-6.3 64-6.3 3.8-1.9 11.5-1.2 17.2 1.6 0 0 3.2 1.5 9.6 5.7 44 29.3 60.8 81.5 37.4 116.6-23.4 35.2-78 39.9-122 10.6z m206.4 219.8c-23.4 35.1-78 39.8-122 10.5-44.1-29.3-60.9-81.5-37.4-116.6 5.1-7.7 13.6-14.2 13.6-14.2 3.1-2.5 9.2-2.2 13.5 0.6l4.1 2.1c25.9 12.3 64-6.3 64-6.3 3.8-1.9 11.5-1.2 17.2 1.5 0 0 3.1 1.5 9.6 5.8 44 29.3 60.8 81.5 37.4 116.6z" p-id="3380" fill="#606266"></path><path d="M228.1 196.8c-13.4 9.6-29.4 14.5-46.3 15.4 35.4 63.1 82 139.3 137.7 224.7l-0.1 0.1c36.9 59.1 80.2 123.6 128 190.2 173.4 241.2 340.8 417.5 374 393.7 33.1-23.8-80.6-238.7-253.9-480-47.9-66.6-95.3-128.2-139.5-182l-0.1 0.1c-63.3-80.2-120.8-148.8-169.3-202.6-6.1 16.1-16.2 30.2-30.5 40.4z m191.7 165.8c0.4 0.3 0.8 0.7 1.1 1.1 1.6 2.2 1.2 6.2-2.2 8.9-46.3 37.6-82.9 60-84.6 60.7-4.6 1.9-8.7 0.5-9.2-3.1s2.8-8 7.3-10c0.4-0.1 35.2-19.8 75.8-54.7 3.9-3.3 8.9-4.9 11.8-2.9z m-112.4 19.3c0.4-0.1 35.3-17.2 73.1-52.9 3.6-3.5 8.9-4.3 12.8-1 0.6 0.6 1.2 1.1 1.6 1.8 2.4 3.4 3 8.5-0.2 11.3-43.6 37.9-80 58.1-81.7 58.6-4.8 1.3-9.9-1.6-11.5-6.5-1.5-4.9 1.1-9.9 5.9-11.3z" p-id="3381" fill="#606266"></path></svg>
                </el-tooltip>
                <el-tooltip class="item" effect="dark" content="刷新" placement="bottom-end">
                    <i class="el-icon-refresh" @click="refreshHandle"></i>
                </el-tooltip>
            </div>
        </div>
        <el-divider></el-divider>
    </div>
</template>

<script>
import { mapState } from 'vuex';
export default {
    name:'Navbar',
    computed:{
        ...mapState(['sidebarIsCollapse','breadcrumbRecordArr'])
    },
    data(){
        return{
            isEnlarge:false,
        }
    },
    mounted(){
        window.onresize=()=>{
            if(!this.checkFullScreenEvent()){
                this.exitFullScreenEvent();
            }
        }
    },
    methods:{
        sidebarHandle(){
            if(this.sidebarIsCollapse){
                this.$store.commit('setSidebarIsCollapse',false);
            }else{
                this.$store.commit('setSidebarIsCollapse',true);
            }
        },
        fullScreenHandle(flag){
            const app=document.querySelector('#app');
            if(flag==='yes'){
                this.fullScreenEvent(app);
            }else{
                this.exitFullScreenEvent(app);
            }
        },
        fullScreenEvent(app){
            if (app.requestFullscreen) {
                app.requestFullscreen();
            } else if (app.mozRequestFullScreen) {
                app.mozRequestFullScreen();
            } else if (app.webkitRequestFullscreen) {
                app.webkitRequestFullscreen();
            } else if (app.msRequestFullscreen) {
                app.msRequestFullscreen();
            }
            this.isEnlarge=true;
        },
        exitFullScreenEvent(app){
            if(document.exitFullScreen) {
                document.exitFullScreen();
            } else if(document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
            } else if(document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            } else if(element.msExitFullscreen) {
                element.msExitFullscreen();
            }
            this.isEnlarge=false;
        },
        checkFullScreenEvent(){
            return  !! (
                document.fullscreen || 
                document.mozFullScreen ||                         
                document.webkitIsFullScreen ||       
                document.webkitFullScreen || 
                document.msFullScreen 
            );
        },
        paletteHandle(){

        },
        refreshHandle(){
            const {path,query} =this.$route;
            this.$router.replace({
                path: `/redirect`,
                query: {
                    path:path,
                    query: query
                }
            });
        }
    }
}
</script>

<style lang="scss" scoped>
.navbar{
    width: 100%;
    background: #fff;
    box-shadow: 0px 1px 2px rgba(0, 21, 41, 0.35);
    .handle-box-1{
        padding: 10px 5px;
        ::v-deep.el-breadcrumb{
            padding: 0 10px;
            flex: 1;
        }
        .sidebar-handle{
            .sidebar-handle-icon{
                cursor: pointer;
                font-size: 22px;
            }
        }
        .handle-route-box{
            padding-right: 20px;
            .icon{
                cursor: pointer;
                width: 18px;
            }
            .paletteIcon{
                margin:0 10px;
            }
            .el-icon-refresh{
                font-size: 18px;
                cursor: pointer;
            }
        }
    }
}

</style>